<script type="text/javascript" src="/bower_components/bootstrap-markdown/js/bootstrap-markdown.js"></script>
<link rel='stylesheet'  href='/bower_components/bootstrap-markdown/css/bootstrap-markdown.min.css'/>

<div class="row">
    <div class="controls col-xs-12">
        <div class="input-group col-xs-11 col-xs-offset-1">
            <div ng-switch="getTypeOfOfData(descriptor.value)">
                <div ng-switch-when='string'>
                    <textarea type="text"
                              markdownedit
                              class="form-control markdownbox"
                              id="descriptors[{{descriptor.prefix}}][{{descriptor.shortName}}]"
                              name="descriptors[{{descriptor.prefix}}][{{descriptor.shortName}}]"
                              ng-class="{just_added: descriptor.just_added, just_deleted: descriptor.just_deleted}"
                              placeholder="{{descriptor.label}}"
                              rows="10"
                              ng-model="descriptor.value"
                              focus-me="descriptor.focused">{{descriptor.value}}
                    </textarea>
                </div>

                <div ng-switch-when='object'>
                    <div ng-repeat="descriptorValue in descriptor.value track by $index">
                        <a href ng-click="remove_value_from_descriptor(descriptor, descriptorValue)" onclick="return false;">
                            <img src="/images/icons/delete_small.png">
                        </a>
                        <textarea type="text"
                          markdownedit
                          class="form-control markdownbox"
                          id="descriptors_{{descriptor.prefix}}_{{descriptor.shortName}}_{{$index}}"
                          name="descriptors_{{descriptor.prefix}}_{{descriptor.shortName}}_{{$index}}"
                          placeholder="{{descriptor.label}}"
                          rows="10"
                          ng-model="descriptor.value[$index]"
                          ng-class="{just_added: descriptor.just_added, just_deleted: descriptor.valuesMarkedAsDeleted[descriptorValue]}"
                          focus-me="descriptor.focused">{{descriptor.value[$index]}}
                        </textarea>
                    </div>
                </div>

                <div ng-switch-default>
                    <textarea type="text"
                              markdownedit
                              class="form-control markdownbox"
                              id="descriptors[{{descriptor.prefix}}][{{descriptor.shortName}}]"
                              name="descriptors[{{descriptor.prefix}}][{{descriptor.shortName}}]"
                              placeholder="{{descriptor.label}}"
                              rows="10"
                              ng-model="descriptor.value"
                              ng-class="{just_added: descriptor.just_added, just_deleted: descriptor.just_deleted}"
                              focus-me="descriptor.focused">{{descriptor.value}}
                    </textarea>
                </div>
            </div>
            <!-- PREVIEW AREA -->
            <!-- <markdown bind-from='descriptor.value'></markdown> --->
        </div>
    </div>
</div>
